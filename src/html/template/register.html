<div class="register-wrapper" data-ng-click="register.stopEvent($event)">
  <table class="control">
    <tbody>

      <!-- register amount field -->
      <tr data-ng-if="!register.ext">
        <td colspan="4">
          <input
            id="amount"
            class="amount"
            type="number"
            placeholder="Amount"
            data-ng-model="register.amount"
            data-ng-change="register.onAmountChanged(register.amount)">
        </td>
      </tr>

      <!-- register 4-buttons: +/-/?/x -->
      <tr data-ng-if="!register.ext">
        <td>
          <button
            class="submit plus"
            data-ng-class="{ 'selected' : register.selectedItem && !register.selectedItem.expense }"
            data-ng-disabled="!register.isAmountValid(register.amount)"
            type="submit"
            data-ng-click="register.setExpense($event, register.selectedItem, 0)">
            <i class="fa fa-money"></i>
            <i class="fa fa-plus"></i>
        </td>

        <td>
          <button
            class="submit minus"
            data-ng-class="{ 'selected' : register.selectedItem && register.selectedItem.expense }"
            data-ng-disabled="!register.isAmountValid(register.amount)"
            type="submit"
            data-ng-click="register.setExpense($event, register.selectedItem, 1)">
            <i class="fa fa-money"></i>
            <i class="fa fa-minus"></i>
          </button>
        </td>

        <td>
          <button
            class="submit ext"
            data-ng-disabled="!register.isAmountValid(register.amount)"
            type="submit"
            data-ng-click="register.showItemExtra($event, register.selectedItem)">
            <i class="fa fa-list"></i>
        </td>

        <td>
          <button
            class="submit delete"
            data-ng-disabled="!register.isAmountValid(register.amount)"
            type="submit"
            data-ng-click="register.deleteItem($event, register.selectedItem)">
            <i class="fa fa-trash-o"></i>
        </td>
      </tr>

      <!-- register:ext datetime field -->
      <tr data-ng-if="register.ext">
        <td colspan="4">
          <input
            class="datetime"
            type="datetime-local"
            data-ng-change="register.onItemDateChanged(register.selectedItem)"
            data-ng-model="register.selectedItem.date">
        </td>
      </tr>

      <!-- register:ext category rows -->
      <tr data-ng-if="register.ext">
        <td colspan="4">
          <span
            data-category-bubble=""
            data-ng-repeat="category in register.categories"
            data-ng-click="register.setCategory($event, register.selectedItem, category)"
            data-icon="category.icon"
            data-name="category.name"
            data-highlighted="category === register.selectedItem.category"
            class="text-right date-cell">
          </span>
        </td>
      </tr>

      <!-- register:ext done -->
      <tr data-ng-if="register.ext">
        <td colspan="4">
          <button
            class="submit submit-wide"
            type="submit"
            value="/done"
            data-ng-click="register.hideItemExtra($event, register.selectedItem)">
            <i class="fa fa-check-square-o"></i>Done
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <table class="items" data-ng-class="{ 'disabled' : register.ext }" data-ng-if="register.items">
    <tbody>
      <tr
        data-ng-class="{ 'selected' : item === register.selectedItem }"
        data-ng-repeat="item in register.items | orderBy : 'timestamp' : true"
        data-ng-click="register.selectItem($event, item)">
        <td
          data-amount-bubble=""
          data-amount="item.amount"
          data-expense="item.expense"
          class="text-right amount-cell">
        </td>
        <td
          data-category-bubble=""
          data-timestamp="item.timestamp"
          data-icon="item.category.icon"
          class="text-right date-cell">
        </td>
      </tr>
    </tbody>
  </table>

  <div class="text-content" data-ng-if="!register.items.length">
    <p>Enter amount to register an item!</p>
  </div>
</div>
